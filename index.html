<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HEARTMAN: Hug Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #ff1493;
            --secondary: #00d4ff;
            --accent: #ff006e;
            --dark-bg: #0a0e27;
            --darker-bg: #050810;
            --neon-pink: #ff007f;
            --neon-cyan: #00ffff;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1a0033 50%, var(--darker-bg) 100%);
            overflow: hidden;
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
            font-family: 'Press Start 2P', cursive;
            color: #fff;
            min-height: 100vh;
        }
        
        #game-container {
            position: relative;
            width: 100vw;
            height: 100dvh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background: radial-gradient(ellipse at 50% 50%, rgba(255, 20, 147, 0.1) 0%, transparent 70%);
        }
        
        canvas {
            border: 4px solid var(--neon-pink);
            box-shadow: 0 0 20px rgba(255, 0, 127, 0.4);
            border-radius: 4px;
            background: #000;
            display: block;
            image-rendering: pixelated;
        }
        
        /* UI Layers */
        .ui-layer {
            width: 100%;
            max-width: 560px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            box-sizing: border-box;
            z-index: 10;
            font-size: 10px;
            text-shadow: 0 0 5px var(--neon-pink);
            margin-bottom: 5px;
        }
        
        .score-label { color: var(--neon-pink); }
        #score-el { color: var(--neon-cyan); }
        .goal-label { color: var(--neon-cyan); }
        #target-el { color: #fff; }

        /* Controls */
        .bottom-controls {
            width: 100%;
            max-width: 560px;
            margin-top: 10px;
            padding: 8px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #333;
            border-radius: 4px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            font-size: 8px;
            color: #aaa;
            text-transform: uppercase;
        }
        .control-item { display: flex; flex-direction: column; align-items: center; gap: 4px; }
        .control-icon { font-size: 16px; }

        /* Overlays */
        .overlay-screen {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 50;
            backdrop-filter: blur(10px);
            transition: opacity 0.3s ease;
        }
        
        .hidden { opacity: 0; pointer-events: none; }
        
        #start-screen { background: rgba(10, 14, 39, 0.95); }
        #game-over-screen { background: rgba(30, 0, 0, 0.95); }
        #finale-screen { background: #000; border: 4px solid var(--neon-pink); }

        /* Typography */
        .title-main {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(2rem, 8vw, 3.5rem);
            font-weight: 900;
            color: var(--neon-pink);
            text-shadow: 4px 4px 0px #550022;
            margin-bottom: 10px;
            text-align: center;
        }
        .title-sub {
            font-size: 0.7rem;
            color: var(--neon-cyan);
            margin-bottom: 30px;
            letter-spacing: 2px;
            text-align: center;
        }
        
        .retro-btn {
            padding: 15px 25px;
            background: #000;
            border: 3px solid var(--neon-pink);
            color: var(--neon-pink);
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            cursor: pointer;
            box-shadow: 5px 5px 0px rgba(255, 0, 127, 0.4);
            margin-top: 20px;
            text-transform: uppercase;
        }
        .retro-btn:active { transform: translate(2px, 2px); box-shadow: 3px 3px 0px rgba(255, 0, 127, 0.4); }

        /* Finale Elements */
        .pixel-heart-container { margin-bottom: 30px; transform: scale(3); }
        .pixel-heart-art {
            width: 10px; height: 10px; background: transparent;
            color: var(--neon-pink);
            box-shadow: 20px 0, 50px 0, 10px 10px, 60px 10px, 0 20px, 70px 20px, 0 30px, 70px 30px, 0 40px, 70px 40px, 10px 50px, 60px 50px, 20px 60px, 50px 60px, 30px 70px, 40px 70px;
            animation: beat 0.8s infinite alternate;
        }
        @keyframes beat { to { transform: scale(1.1); filter: brightness(1.2); } }

        .finale-text { text-align: center; max-width: 80%; }
        .finale-quote {
            font-size: 0.7rem; color: var(--neon-cyan);
            line-height: 1.6; margin: 20px 0;
            padding: 15px; border: 2px dashed #333;
        }

        /* Popup */
        #quote-popup {
            position: fixed; top: 20px; left: 50%; transform: translate(-50%, -20px);
            background: #000; color: var(--neon-pink);
            padding: 10px 15px; border: 2px solid var(--neon-pink);
            font-size: 8px; text-align: center; z-index: 100;
            width: 280px; opacity: 0; transition: all 0.3s;
        }
        #quote-popup.visible { opacity: 1; transform: translate(-50%, 0); }
    </style>
</head>
<body>

<div id="game-container">
    <div class="ui-layer">
        <div><span class="score-label">PTS:</span> <span id="score-el">0</span></div>
        <div><span class="goal-label">GOAL:</span> <span id="target-el">0</span></div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <div class="bottom-controls">
        <div class="control-item"><div class="control-icon">üïπÔ∏è</div><div>Swipe</div></div>
        <div class="control-item"><div class="control-icon">‚ù§Ô∏è</div><div>Collect</div></div>
        <div class="control-item"><div class="control-icon">‚ö°</div><div>Powerup</div></div>
    </div>

    <div id="start-screen" class="overlay-screen">
        <div class="title-main">HEART<br>MAN</div>
        <div class="title-sub">HUG DAY EDITION</div>
        <div id="enemies-display" style="margin: 20px 0; text-align: center; font-size: 8px; line-height: 1.8;"></div>
        <button id="start-btn" class="retro-btn">INSERT COIN</button>
    </div>

    <div id="game-over-screen" class="overlay-screen hidden">
        <h1 style="color: #ff3333; margin-bottom: 20px;">GAME OVER</h1>
        <p style="font-size: 0.7rem; color: #ccc; text-align: center; line-height: 1.5;">The Glooms won.<br>But love persists.</p>
        <button class="retro-btn" onclick="location.reload()">RETRY</button>
    </div>

    <div id="finale-screen" class="overlay-screen hidden">
        <div class="pixel-heart-container"><div class="pixel-heart-art"></div></div>
        <div class="finale-text">
            <h2 style="color: var(--neon-pink); margin-bottom: 15px;">HAPPY HUG DAY</h2>
            <div id="final-quote-container" class="finale-quote"></div>
            <button class="retro-btn" onclick="location.reload()">PLAY AGAIN</button>
        </div>
    </div>

    <div id="quote-popup"></div>
</div>

<script>
    // --- VARIABLES ---
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score-el');
    const targetEl = document.getElementById('target-el');
    const startScreen = document.getElementById('start-screen');
    const gameOverScreen = document.getElementById('game-over-screen');
    const finaleScreen = document.getElementById('finale-screen');
    const quotePopup = document.getElementById('quote-popup');
    const finalQuoteContainer = document.getElementById('final-quote-container');

    const width = 28;
    const TILE_SIZE = 20;
    
    // Layout: 0=Dot, 1=Wall, 3=Powerup, 4=Empty
    const layout = [
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,
        1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,
        1,3,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,3,1,
        1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,
        1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
        1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,1,
        1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,1,
        1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,
        1,1,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,
        1,1,1,1,1,1,0,1,1,4,4,4,4,4,4,4,4,4,4,1,1,0,1,1,1,1,1,1,
        1,1,1,1,1,1,0,1,1,4,1,1,1,2,2,1,1,1,4,1,1,0,1,1,1,1,1,1,
        1,1,1,1,1,1,0,1,1,4,1,2,2,2,2,2,2,1,4,1,1,0,1,1,1,1,1,1,
        4,4,4,4,4,4,0,0,0,4,1,2,2,2,2,2,2,1,4,0,0,0,4,4,4,4,4,4,
        1,1,1,1,1,1,0,1,1,4,1,2,2,2,2,2,2,1,4,1,1,0,1,1,1,1,1,1,
        1,1,1,1,1,1,0,1,1,4,1,1,1,1,1,1,1,1,4,1,1,0,1,1,1,1,1,1,
        1,1,1,1,1,1,0,1,1,4,1,1,1,1,1,1,1,1,4,1,1,0,1,1,1,1,1,1,
        1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,
        1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,
        1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,
        1,3,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,3,1,
        1,1,1,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,0,1,1,1,
        1,1,1,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,0,1,1,1,
        1,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,1,
        1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,
        1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,
        1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
    ];

    // Data must be defined BEFORE Init
    let ghosts = [
        { name: 'blinky', index: 348, prevIndex: 348, speed: 130, timer: 0, scared: false, start: 348, currentDir: -1, color: '#ff1744', displayName: 'STRESS', icon: 'üò°' },
        { name: 'pinky', index: 376, prevIndex: 376, speed: 180, timer: 0, scared: false, start: 376, currentDir: -1, color: '#ff6ec7', displayName: 'ANXIETY', icon: 'üò∞' },
        { name: 'inky', index: 351, prevIndex: 351, speed: 220, timer: 0, scared: false, start: 351, currentDir: 1, color: '#9c27b0', displayName: 'DOUBT', icon: 'üòµ‚Äçüí´' },
        { name: 'clyde', index: 379, prevIndex: 379, speed: 280, timer: 0, scared: false, start: 379, currentDir: 1, color: '#00bcd4', displayName: 'LONELINESS', icon: 'ü•∫' }
    ];

    let pacman = { index: 490, prevIndex: 490, dir: 1, nextDir: 1 };
    let squares = [];
    let score = 0;
    let winningScore = 0;
    let gameActive = false;
    let audioContext = null;
    let currentSessionQuotes = [];

    const powerupQuotes = [
        "Imagine me grabbing your bum while we kiss", "Imagine us kissing in the rain",
        "Imagine us cuddling in a thunderstorm", "I want to wake up next to you daily",
        "Your laugh is my favorite sound", "You are my safe space",
        "Every love song is about you", "I'd choose you in a hundred lifetimes",
        "Imagine dancing to jazz in the kitchen", "You make the gloomy days sunny",
        "I am so addicted to you", "Imagine holding hands on an old street",
        "My heart beats faster near you", "You are the best thing ever",
        "I love you more than pizza", "Imagine a lazy Sunday in sheets",
        "You are my home", "I just want to hold you tight",
        "Even when I'm angry, I love you", "Imagine us growing old flirting",
        "You're the peanut butter to my jelly", "I love it when you smile at me",
        "Imagine late night drives holding hands", "You smell like home",
        "I crave your touch constantly", "You are my favorite distraction",
        "I love you to the moon and back", "You are my happy place",
        "Imagine us star gazing on a hill", "I love the way you look at me",
        "You're my dream come true", "Imagine breakfast in bed together",
        "I want to steal your hoodies", "You're sweeter than chocolate",
        "I get butterflies seeing you", "Imagine us adopting a puppy",
        "I never want to stop making memories", "Your voice calms my soul",
        "I love your warm hugs", "You are my forever plus one"
    ];

    const finaleQuotes = [
        "No matter how bad the situations are, love always finds a way. I love your hugs.",
        "In your arms is the only place I want to be.", "A hug from you mends all my broken pieces.",
        "Distance means nothing when one hug can change everything.", "I would fight the world just to end the day in your arms.",
        "Your hugs are my anchor in this stormy world.", "One hug from you wipes away a thousand worries.",
        "Home is not a place, it's the feeling of your arms around me.", "I survived the maze of life just to find your embrace.",
        "The best gift you can give me is a tight hug that lasts forever.", "My favorite place in the universe? Right next to you.",
        "Through every gloom and every fear, I choose you.", "You are the pause button on my chaotic life.",
        "Let's stay tangled in a hug until the world ends.", "Your heartbeat is the rhythm I want to fall asleep to.",
        "Nothing feels as safe as being held by you.", "I gathered all this love just to give it to you.",
        "A hug is a handshake from the heart, and my heart is yours.", "You are the warmth in my coldest winters.",
        "Here's to a lifetime of hugs, laughter, and us."
    ];

    // --- GAME ENGINE ---
    
    function displayEnemiesOnTitle() {
        const enemiesDisplay = document.getElementById('enemies-display');
        if (!enemiesDisplay) return;
        let html = '<div style="margin-bottom: 8px; color: #ff007f;">THE GLOOMS:</div>';
        ghosts.forEach(g => {
            html += `<div style="margin: 4px 0; color: ${g.color}; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <span>${g.icon}</span> <span>${g.displayName}</span>
                     </div>`;
        });
        enemiesDisplay.innerHTML = html;
    }

    function init() {
        const availableHeight = window.innerHeight * 0.65;
        const availableWidth = window.innerWidth * 0.95;
        let scale = Math.min(availableWidth / (width * TILE_SIZE), availableHeight / (width * TILE_SIZE));
        canvas.width = width * TILE_SIZE * scale;
        canvas.height = width * TILE_SIZE * scale;
        ctx.scale(scale, scale);

        winningScore = 0;
        squares = [];
        layout.forEach(cell => {
            if(cell === 0) winningScore++;
            if(cell === 3) winningScore+=50;
        });
        targetEl.innerText = winningScore;
        currentSessionQuotes = [...powerupQuotes].sort(() => 0.5 - Math.random()).slice(0, 4);
        
        drawBoard();
    }

    // --- SYNTHWAVE AUDIO ENGINE (Code Generated = 100% Reliable) ---
    function playMusic() {
        if(!audioContext) audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        const bpm = 130;
        const noteDuration = 60 / bpm;
        let nextNoteTime = audioContext.currentTime;

        // Bassline Notes (Retro Arpeggio)
        const bassNotes = [65.41, 65.41, 77.78, 77.78, 87.31, 87.31, 98.00, 98.00]; // C2, Eb2, F2, G2
        let noteIndex = 0;

        function scheduler() {
            while (nextNoteTime < audioContext.currentTime + 0.1) {
                playNote(bassNotes[noteIndex % bassNotes.length], nextNoteTime);
                nextNoteTime += noteDuration / 2; // 8th notes
                noteIndex++;
            }
            if(gameActive) setTimeout(scheduler, 25);
        }

        function playNote(freq, time) {
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            osc.type = 'sawtooth';
            osc.frequency.value = freq;
            
            // Lowpass filter for "muffled" retro sound
            const filter = audioContext.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.value = 800;

            osc.connect(filter);
            filter.connect(gain);
            gain.connect(audioContext.destination);

            gain.gain.setValueAtTime(0.1, time);
            gain.gain.exponentialRampToValueAtTime(0.001, time + 0.2);

            osc.start(time);
            osc.stop(time + 0.2);
        }
        scheduler();
    }

    // --- GAME LOOP ---
    function gameLoop() {
        if (!gameActive) return;

        // Pacman Move
        let moveIdx = pacman.index + pacman.nextDir;
        if(layout[moveIdx] !== 1 && layout[moveIdx] !== 2) pacman.dir = pacman.nextDir;
        
        moveIdx = pacman.index + pacman.dir;
        if (layout[moveIdx] !== 1 && layout[moveIdx] !== 2) {
            pacman.prevIndex = pacman.index;
            pacman.index = moveIdx;
        }

        // Tunnel
        if(pacman.index === 392) pacman.index = 419;
        else if(pacman.index === 419) pacman.index = 392;

        // Eat
        if (layout[pacman.index] === 0 && !squares[pacman.index]) {
            score++; squares[pacman.index] = true;
            scoreEl.innerText = score;
        } else if (layout[pacman.index] === 3 && !squares[pacman.index]) {
            score += 50; squares[pacman.index] = true;
            scoreEl.innerText = score;
            let qt = currentSessionQuotes.length > 0 ? currentSessionQuotes.pop() : "Bonus Love!";
            showHugQuote(qt);
            ghosts.forEach(g => g.scared = true);
            setTimeout(() => ghosts.forEach(g => g.scared = false), 10000);
            if(navigator.vibrate) navigator.vibrate(50);
        }

        if (score >= winningScore) { endGame(true); return; }

        // Ghost AI
        ghosts.forEach(ghost => {
            ghost.timer++;
            let thresh = ghost.scared ? 12 : (ghost.name === 'blinky' ? 4 : 6);
            if(ghost.timer > thresh) {
                ghost.timer = 0;
                const moves = [-1, 1, -width, width].filter(d => {
                    let next = ghost.index + d;
                    return layout[next] !== 1 && (ghost.scared || d !== -ghost.currentDir);
                });

                if(moves.length > 0) {
                    let best = moves[0];
                    if(!ghost.scared) {
                        let t = pacman.index; // Targeting
                        let min = Infinity;
                        moves.forEach(d => {
                            let tx = t % width, ty = Math.floor(t / width);
                            let gx = (ghost.index+d) % width, gy = Math.floor((ghost.index+d)/width);
                            let dst = Math.sqrt((tx-gx)**2 + (ty-gy)**2);
                            if(dst < min) { min = dst; best = d; }
                        });
                    } else {
                        best = moves[Math.floor(Math.random() * moves.length)];
                    }
                    ghost.prevIndex = ghost.index;
                    ghost.index += best;
                    ghost.currentDir = best;
                }
            }

            // COLLISION CHECK (Swapping logic fixes pass-through bug)
            if (ghost.index === pacman.index || (ghost.index === pacman.prevIndex && ghost.prevIndex === pacman.index)) {
                if(ghost.scared) {
                    ghost.index = ghost.start;
                    score += 100; scoreEl.innerText = score;
                } else {
                    endGame(false);
                }
            }
        });

        drawBoard();
        setTimeout(() => requestAnimationFrame(gameLoop), 50);
    }

    function drawBoard() {
        ctx.fillStyle = '#000'; ctx.fillRect(0,0,canvas.width,canvas.height);
        layout.forEach((c, i) => {
            let x = (i%width)*TILE_SIZE, y = Math.floor(i/width)*TILE_SIZE;
            if(c===1) {
                ctx.fillStyle = '#1a1a3e'; ctx.fillRect(x,y,TILE_SIZE,TILE_SIZE);
                ctx.strokeStyle = '#ff007f'; ctx.lineWidth=1; ctx.strokeRect(x+4,y+4,TILE_SIZE-8,TILE_SIZE-8);
            } else if(c===0 && !squares[i]) {
                ctx.fillStyle = '#fbcfe8'; ctx.beginPath(); ctx.arc(x+10,y+10,2,0,6.28); ctx.fill();
            } else if(c===3 && !squares[i]) {
                ctx.fillStyle = '#ff007f'; ctx.beginPath(); ctx.arc(x+10,y+10,6,0,6.28); ctx.fill();
            }
        });

        // Player
        let px = (pacman.index%width)*TILE_SIZE+10, py = Math.floor(pacman.index/width)*TILE_SIZE+10;
        ctx.font = "20px Arial"; ctx.textAlign="center"; ctx.textBaseline="middle";
        ctx.fillText('‚ù§Ô∏è', px, py+2);

        // Ghosts
        ghosts.forEach(g => {
            let gx = (g.index%width)*TILE_SIZE+10, gy = Math.floor(g.index/width)*TILE_SIZE+10;
            ctx.fillText(g.scared ? 'ü´•' : g.icon, gx, gy+2);
        });
    }

    function showHugQuote(text) {
        quotePopup.innerText = text;
        quotePopup.classList.add('visible');
        setTimeout(() => quotePopup.classList.remove('visible'), 3000);
    }

    function endGame(win) {
        gameActive = false;
        if(win) {
            finaleScreen.classList.remove('hidden');
            let q = finaleQuotes[Math.floor(Math.random()*finaleQuotes.length)];
            finalQuoteContainer.innerText = `"${q}"`;
            if(navigator.vibrate) navigator.vibrate([100,50,100]);
        } else {
            gameOverScreen.classList.remove('hidden');
            if(navigator.vibrate) navigator.vibrate(200);
        }
    }

    // Input
    document.addEventListener('keydown', e => {
        if(e.key.includes('Left')) pacman.nextDir = -1;
        if(e.key.includes('Right')) pacman.nextDir = 1;
        if(e.key.includes('Up')) pacman.nextDir = -width;
        if(e.key.includes('Down')) pacman.nextDir = width;
    });

    let tx, ty;
    document.addEventListener('touchstart', e => { e.preventDefault(); tx = e.touches[0].clientX; ty = e.touches[0].clientY; }, {passive: false});
    document.addEventListener('touchend', e => {
        let dx = e.changedTouches[0].clientX - tx, dy = e.changedTouches[0].clientY - ty;
        if(Math.abs(dx)>20 || Math.abs(dy)>20) {
            if(Math.abs(dx) > Math.abs(dy)) pacman.nextDir = dx > 0 ? 1 : -1;
            else pacman.nextDir = dy > 0 ? width : -width;
        }
    }, {passive: false});

    document.getElementById('start-btn').addEventListener('click', () => {
        startScreen.classList.add('hidden');
        displayEnemiesOnTitle(); // Init visuals
        playMusic(); // Start Audio
        init(); // Start Game
        gameActive = true;
        gameLoop();
    });

    window.addEventListener('resize', () => { if(gameActive) init(); });
    
    // Init enemies display on load
    displayEnemiesOnTitle();
</script>
</body>
</html>
